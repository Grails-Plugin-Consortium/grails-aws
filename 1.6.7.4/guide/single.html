<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Grails AWS Plugin 1.6.7.4</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#1%20Introduction%20to%20Grails%20AWS%20Plugin"><strong>1</strong><span>Introduction to Grails AWS Plugin</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#2%20Amazon%20Simple%20Storage%20Service%20(AWS%20S3)"><strong>2</strong><span>Amazon Simple Storage Service (AWS S3)</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#3%20Amazon%20Simple%20Email%20Service%20(AWS%20SES)"><strong>3</strong><span>Amazon Simple Email Service (AWS SES)</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p>Amazon Web Services (AWS) grails plugin provides easy access to simpler functions of AWS</p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Grails AWS Plugin - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Lucas Teixeira, Jay Prall</p>
                            <p><strong>Version:</strong> 1.6.7.4</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#1%20Introduction%20to%20Grails%20AWS%20Plugin"><strong>1</strong><span>Introduction to Grails AWS Plugin</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#1.1%20Installing%20Grails%20AWS%20Plugin"><strong>1.1</strong><span>Installing Grails AWS Plugin</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#1.2%20Getting%20the%20source%20code"><strong>1.2</strong><span>Getting the source code</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#1.3%20Configuring%20the%20plugin%20in%20your%20application"><strong>1.3</strong><span>Configuring the plugin in your application</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#1.3.1%20Setting%20AWS%20Credentials"><strong>1.3.1</strong><span>Setting AWS Credentials</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#1.4%20Gant%20scripts"><strong>1.4</strong><span>Gant scripts</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#2%20Amazon%20Simple%20Storage%20Service%20(AWS%20S3)"><strong>2</strong><span>Amazon Simple Storage Service (AWS S3)</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#2.1%20Specific%20configuration%20for%20S3"><strong>2.1</strong><span>Specific configuration for S3</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#2.2%20Uploading%20files"><strong>2.2</strong><span>Uploading files</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.2.1%20Setting%20file%20virual%20path"><strong>2.2.1</strong><span>Setting file virual path</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.2.2%20Overriding%20AWS%20credentials"><strong>2.2.2</strong><span>Overriding AWS credentials</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.2.3%20Overriding%20bucket%20to%20file%20upload"><strong>2.2.3</strong><span>Overriding bucket to file upload</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.2.4%20ACL%20(file%20permission)"><strong>2.2.4</strong><span>ACL (file permission)</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.2.5%20RRS%20-%20Reduced%20Redundancy%20Storage"><strong>2.2.5</strong><span>RRS - Reduced Redundancy Storage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.2.6%20Setting%20File%20Metadata"><strong>2.2.6</strong><span>Setting File Metadata</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.2.7%20Using%20Server%20Side%20Encryption"><strong>2.2.7</strong><span>Using Server Side Encryption</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#2.3%20Deleting%20files"><strong>2.3</strong><span>Deleting files</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#2.4%20Accessing%20files"><strong>2.4</strong><span>Accessing files</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.4.1%20Accessing%20public%20files"><strong>2.4.1</strong><span>Accessing public files</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.4.2%20Accessing%20private%20files"><strong>2.4.2</strong><span>Accessing private files</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.4.3%20Creating%20public%20URLs%20for%20private%20files"><strong>2.4.3</strong><span>Creating public URLs for private files</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.4.4%20Creating%20torrent%20for%20S3%20hosted%20files"><strong>2.4.4</strong><span>Creating torrent for S3 hosted files</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#2.4.5%20Accessing%20only%20file%20metadata"><strong>2.4.5</strong><span>Accessing only file metadata</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#3%20Amazon%20Simple%20Email%20Service%20(AWS%20SES)"><strong>3</strong><span>Amazon Simple Email Service (AWS SES)</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#3.1%20Configuring%20the%20SES%20options"><strong>3.1</strong><span>Configuring the SES options</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#3.2%20Sending%20text%20emails"><strong>3.2</strong><span>Sending text emails</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#3.3%20Sending%20HTML%20emails"><strong>3.3</strong><span>Sending HTML emails</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#3.4%20Sending%20emails%20with%20attachments"><strong>3.4</strong><span>Sending emails with attachments</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="1 Introduction to Grails AWS Plugin">1 Introduction to Grails AWS Plugin</h1>
Grails AWS plugin intends to provide most of any other reason, an EASY WAY to access and use AWS services.<p class="paragraph"/>Not all services are included in the plugin, you can check this guide to see what you can do and how.
If you want to contribute with another service that is not implemented yet, check Section <strong class="bold">"Contributions ad Reporting Bugs"</strong> of this guide.


<h2 id="1.1 Installing Grails AWS Plugin">1.1 Installing Grails AWS Plugin</h2>
As other grails plugins you <strong class="bold">can</strong> install it using the <code>install-plugin</code> command like this:<p class="paragraph"/><div class="code"><pre>grails install&#45;plugin aws</pre></div><p class="paragraph"/>But since Grails 1.3.x, it is possible (and I <strong class="bold">really encourage you doing this</strong>) to declare the plugin dependency in the <code>BuildConfig.groovy</code> file, as shown here:<p class="paragraph"/><div class="code"><pre>grails.project.dependency.resolution = &#123;
    inherits(<span class="java&#45;quote">"global"</span>) &#123; &#125;
    log <span class="java&#45;quote">"info"</span>
    repositories &#123;
        //your repositories
    &#125;
    dependencies &#123;
        //your regular dependencies
    &#125;
    plugins &#123;
        //here go your plugin dependencies
        runtime ':aws:1.2.12.3'
    &#125;
&#125;</pre></div><p class="paragraph"/>Note the <code>aws</code> as the plugin name, and the <code>1.2.12.3</code> as the plugin version. As the time you're reading this, 1.2.12.3 won't probably be the last version, so change it for the correct version you want to grab, or use <strong class="bold">latest.release</strong> as version to grab the latest one.



<h2 id="1.2 Getting the source code">1.2 Getting the source code</h2>

The source code for the plugin is available on Github. <a href="http://github.com/grails-aws/grails-aws" target="blank">http://github.com/grails-aws/grails-aws</a>


<h2 id="1.3 Configuring the plugin in your application">1.3 Configuring the plugin in your application</h2>
You'll have to configure the plugin in Config.groovy to set AWS credentials and other properties specifically to each AWS service you may use.


<h2 id="1.3.1 Setting AWS Credentials">1.3.1 Setting AWS Credentials</h2>
<h3>Setting AWS Credentials</h3><p class="paragraph"/>You can set your access-key and secret-key in two different manners as below<p class="paragraph"/><h4>Property-file credentials configuration</h4><p class="paragraph"/>As recommended by Amazon, you can use a .properties file to handle your secret and access keys for this plugin.<p class="paragraph"/>You'll have to create some properties file with the content as show below:<p class="paragraph"/><div class="code"><pre>accessKey = your&#45;access&#45;key
secretKey = your&#45;secret&#45;key</pre></div><p class="paragraph"/>And then, you will have to tell your application in Config.groovy to read this property file:<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;
         credentials &#123;
            properties = <span class="java&#45;quote">"/my/path/to/AwsCredentials.properties"</span>
         &#125;
      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/><h4>Plain-text credentials configuration</h4><p class="paragraph"/>If you don't have access to the filesystem in someway, or prefer to set the access and secret key directly in Config.groovy, you can do it this way:<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;
         credentials &#123;
            accessKey = <span class="java&#45;quote">"your&#45;access&#45;key"</span>
            secretKey = <span class="java&#45;quote">"your&#45;secret&#45;key"</span>
         &#125;
      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/><blockquote class="warning">
Remember, if you set a properties file, it will take priority over this way.
</blockquote><p class="paragraph"/><h4>Using System Properties as credentials</h4><p class="paragraph"/>Sometimes, you still don't have access to filesystem, but don't want to store your credentials wide open in your configuration file, or you want to deploy the same app in more than one place, and use different credentials for each one. So, in these cases, the best approach to solve this, is to pass them as <code>-D</code> params to your application server. It is easy and the plugin will understand this as a plain text credential, but with nothing hardcoded in your app.<p class="paragraph"/>You'll have to start your console passing the accessKey and secretKey as param values. In the dev environment, would be like this:<p class="paragraph"/><div class="code"><pre>grails &#45;DawsAccessKey=xxxxxx &#45;DawsSecretKey=yyyyyy run&#45;app</pre></div><p class="paragraph"/>After this, just setup your credentials as described below:<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;
         credentials &#123;
            accessKey = <span class="java&#45;object">System</span>.properties&#91;'awsAccessKey'&#93;
            secretKey = <span class="java&#45;object">System</span>.properties&#91;'awsSecretKey'&#93;
         &#125;
      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/>We shall thank groovy config files, that allow directly programming into it!


<h2 id="1.4 Gant scripts">1.4 Gant scripts</h2>
Grails AWS Plugin brings some scripts to use in your app, all scripts names follow this rule:<p class="paragraph"/><div class="code"><pre>aws&#45;&#91;service&#93;&#45;&#91;operation&#93;</pre></div><p class="paragraph"/>So, all scripts are prefixed with 'aws', followed by its service code, and then the operation name, almost always the same operation name in the corresponding WSDL. For example, to connect with SES and check your sending email statistics (GetSendStatistics operation), you'll have to execute:<p class="paragraph"/><div class="code"><pre>grails aws&#45;ses&#45;get&#45;send&#45;statistics</pre></div><p class="paragraph"/>All information are printed in your screen, and when you need to interact with parameters, the script will prompt you.<p class="paragraph"/>More detailed information on scripts can be found in the left frame of the screen.


<h1 id="2 Amazon Simple Storage Service (AWS S3)">2 Amazon Simple Storage Service (AWS S3)</h1>



<h2 id="2.1 Specific configuration for S3">2.1 Specific configuration for S3</h2>
In your config.groovy, inside <strong class="bold">grails.plugin.aws</strong> closure, you can set some extra configurations for S3 usage.
This properties will be used when no respective config is defined when uploading file.<p class="paragraph"/>For example, you can define a default bucket for file uploads. Everytime you attempt to upload a file without explicitly setting the bucket name, this default will be used.<p class="paragraph"/>Check now, all default config possibilities you can set.<p class="paragraph"/><h3>Bucket name</h3><p class="paragraph"/>To set a default bucket, that will be used to all file upload use the config below<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;
         s3 &#123;
            bucket = <span class="java&#45;quote">"grails&#45;plugin&#45;test"</span>
         &#125;
      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/>During the first upload on this bucket, it will be created if does not exist.<p class="paragraph"/><h3>Bucket location</h3><p class="paragraph"/>When creating buckets, you can define the default bucket location using the <code>bucketLocation</code> config as shown below<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;
         s3 &#123;
            bucketLocation = <span class="java&#45;quote">"EU"</span>
         &#125;
      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/>In this case, bucket will be created in AWS Europe Region.<p class="paragraph"/><h3>ACL (file permission)</h3><p class="paragraph"/>The permissions that will be granted on this file, you can use:
<ul class="star">
<li><strong class="bold">public:</strong> Allow public access to everyone that attempts to read this file</li>
<li><strong class="bold">private:</strong> Sets private access to this file, only your account will read/write on it</li>
<li><strong class="bold">public_read_write:</strong> This will make this file wide open to any AWS account, read and write</li>
<li><strong class="bold">authenticated_read:</strong> Using this acl string, only logged AWS accounts will have permissions to read the file</li>
</ul><p class="paragraph"/>To configure public access as default to all file uploads, use this:<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;
         s3 &#123;
            acl = <span class="java&#45;quote">"<span class="java&#45;keyword">public</span>"</span>
         &#125;
      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/>If you like to set private access to your files, you should config this way:<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;
         s3 &#123;
            acl = <span class="java&#45;quote">"<span class="java&#45;keyword">private</span>"</span>
         &#125;
      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/><h3>RRS - Reduced Redundancy Storage</h3><p class="paragraph"/>RRS stored files provides a cheaper storage with 99.99% durability instead of 99.999999999% as the default provided by AWS S3. More information here: <a href="http://aws.amazon.com/about-aws/whats-new/2010/05/19/announcing-amazon-s3-reduced-redundancy-storage/" target="blank">http://aws.amazon.com/about-aws/whats-new/2010/05/19/announcing-amazon-s3-reduced-redundancy-storage/</a><p class="paragraph"/>This is disabled by default, if you like to set RRS enabled for all uploads, use this config key:<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;
         s3 &#123;
            rrs = <span class="java&#45;keyword">true</span>
         &#125;
      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/>


<h2 id="2.2 Uploading files">2.2 Uploading files</h2>
The plugin adds support for uploading files to Amazon S3, by adding a s3upload(...) method to <strong class="bold">File</strong> and <strong class="bold">InputStream</strong> classes, so you'll just need to call this method passing a closure with overridden config options, but if you do not want to override it, just leave this and the plugin will catch from the Config.groovy default options.<p class="paragraph"/><h3>Simple File upload from a File object</h3><p class="paragraph"/><div class="code"><pre>def s3file = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/test.txt"</span>).s3upload &#123;
    path <span class="java&#45;quote">"folder/to/my/file/"</span>
&#125;</pre></div><p class="paragraph"/>This way your test.txt file will be uploaded to<p class="paragraph"/><div class="code"><pre>&#60;<span class="java&#45;keyword">default</span>&#45;bucket&#62;.s3.amazonaws.com/folder/to/my/file/test.txt</pre></div><p class="paragraph"/>If you want to override config during the file upload, check this guide next section.<p class="paragraph"/><h3>Uploading files directly from its InputStream</h3><p class="paragraph"/>This is useful when you don't have the file stored in your filesystem. When user uploads files to your application using a <strong class="bold">multipart/form-data</strong> form, you can upload it directly to s3. Imagine it have an upload form like this:<p class="paragraph"/><div class="code"><pre>&#60;g:uploadForm action=<span class="java&#45;quote">"uploadFromInputStream"</span>&#62;
    &#60;input type=<span class="java&#45;quote">"file"</span> name=<span class="java&#45;quote">"photo"</span>&#62;
    &#60;input type=<span class="java&#45;quote">"submit"</span> value=<span class="java&#45;quote">"upload"</span>&#62;
&#60;/g:uploadForm&#62;</pre></div><p class="paragraph"/>you could have your <strong class="bold">uploadFromInputStream</strong> action implemented this way:<p class="paragraph"/><div class="code"><pre>def file = request.getFile('photo')
def uploadedFile = file.inputStream.s3upload(file.originalFilename) &#123;
    bucket <span class="java&#45;quote">"file&#45;upload&#45;from&#45;inputstream"</span>
&#125;</pre></div><p class="paragraph"/><blockquote class="warning">
Uploading from InputStream requires one extra parameters, the filename that this object will have in S3, usually the 'originalFileName'.
</blockquote><p class="paragraph"/>Note that when you use <strong class="bold">File</strong>.s3upload you just pass the closure that configures it. When using from one inputStream, you <strong class="bold">SHOULD</strong> have to specify the name that file will have and the file size. The above example show exactly how to do it with the correct info from the uploaded file.


<h2 id="2.2.1 Setting file virual path">2.2.1 Setting file virual path</h2>
S3 does not support paths or buckets inside other buckets, to solve this and keep your files organized, you can use the path method inside the config closure. Doing this, the plugin will set a metadata into this file telling AWS that this file is virtually in a folder that does not exist.<p class="paragraph"/>The effect is exactly like in a regular folder. For example, doing the upload below:<p class="paragraph"/><div class="code"><pre>def uploadedFile = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/profile&#45;picture.jpg"</span>).s3upload &#123;
    bucket <span class="java&#45;quote">"my&#45;aws&#45;app"</span>
    path <span class="java&#45;quote">"pictures/user/profile/"</span>
&#125;</pre></div><p class="paragraph"/>The file will be stored and available in the following url:<p class="paragraph"/><div class="code"><pre>http://my&#45;aws&#45;app.s3.amazonaws.com/pictures/user/profile/profile&#45;picture.jpg</pre></div><p class="paragraph"/>And using the AWS S3 console, the files will visually be inside folders either.
Some third-party apps is already using this feature to show "folders".


<h2 id="2.2.2 Overriding AWS credentials">2.2.2 Overriding AWS credentials</h2>
Just call the <strong class="bold">credentials</strong> method inside the upload closure, and this credentials will be used (for this upload only). Example:<p class="paragraph"/><div class="code"><pre>def uploadedFile = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/test.txt"</span>).s3upload &#123;
    credentials <span class="java&#45;quote">"my&#45;other&#45;access&#45;key"</span>, <span class="java&#45;quote">"my&#45;other&#45;secret&#45;key"</span>
&#125;</pre></div>



<h2 id="2.2.3 Overriding bucket to file upload">2.2.3 Overriding bucket to file upload</h2>
You can call the <strong class="bold">bucket</strong> method and define witch different bucket (from default) will be used. This bucket will be created if does not exist.<p class="paragraph"/><div class="code"><pre>def uploadedFile = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/test.txt"</span>).s3upload &#123;
    bucket <span class="java&#45;quote">"other&#45;bucket"</span>
&#125;</pre></div><p class="paragraph"/>This file will be uploaded to<p class="paragraph"/><div class="code"><pre>other&#45;bucket.s3.amazonaws.com/test.txt</pre></div><p class="paragraph"/>Remember, when plugin created a non pre-existent bucket, it will be created in the default <strong class="bold">US</strong> region. If you like to set a different location, just pass a second string parameter containing the region string. For example, to set this bucket creation in Europe region:<p class="paragraph"/><div class="code"><pre>def uploadedFile = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/test.txt"</span>).s3upload &#123;
    bucket <span class="java&#45;quote">"bucket&#45;not&#45;yet&#45;created&#45;in&#45;europe"</span>, <span class="java&#45;quote">"EU"</span>
&#125;</pre></div>


<h2 id="2.2.4 ACL (file permission)">2.2.4 ACL (file permission)</h2>
The permissions that will be granted on this file, you can use the same values shown in "General Plugin Config" topic on this guide.<p class="paragraph"/><div class="code"><pre>def uploadedFile = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/test.txt"</span>).s3upload &#123;
    acl <span class="java&#45;quote">"<span class="java&#45;keyword">private</span>"</span>
&#125;</pre></div>


<h2 id="2.2.5 RRS - Reduced Redundancy Storage">2.2.5 RRS - Reduced Redundancy Storage</h2>
If some specifically file you like to use a different RRS setting, call the rrs method in the closure, passing true or false, as you wish<p class="paragraph"/><div class="code"><pre>def uploadedFile = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/test.txt"</span>).s3upload &#123;
    rrs <span class="java&#45;keyword">false</span>
&#125;</pre></div>


<h2 id="2.2.6 Setting File Metadata">2.2.6 Setting File Metadata</h2>
AWS S3 files can store user metadata, doing this is simple as setting a metadata map to file upload<p class="paragraph"/><div class="code"><pre>def uploadedFile = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/test.txt"</span>).s3upload &#123;
    metadata &#91;user&#45;id: 123, username: 'johndoe', registered&#45;date: <span class="java&#45;keyword">new</span> Date().format('dd/MM/yyyy')&#93;
&#125;</pre></div>


<h2 id="2.2.7 Using Server Side Encryption">2.2.7 Using Server Side Encryption</h2>
AWS S3 files can be stored encrypted in S3, and AWS allows you to specify this as a request header.
To use this, simply set the useEncryption property to 'true' in the file upload closure. The plugin
will set the header for encryption and the file will be encrypted using AES-256 algorithm by AWS before storing in S3.<p class="paragraph"/><div class="code"><pre>def uploadedFile = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/tmp/test.txt"</span>).s3upload &#123;
    useEncryption <span class="java&#45;keyword">true</span>
&#125;</pre></div>


<h2 id="2.3 Deleting files">2.3 Deleting files</h2>
You can delete files from Amazon S3 just knowing the bucket name and full path for it (just file name or path + file name)<p class="paragraph"/>It is damn simple, like the examples below<p class="paragraph"/>You'll first need to define the <strong class="bold">aws</strong> bean that is provided by the plugin:<p class="paragraph"/><div class="code"><pre>class MyController &#123;<p class="paragraph"/>    def aws<p class="paragraph"/>    def myAction = &#123;
        (...)
    &#125;
&#125;</pre></div><p class="paragraph"/>After that, you will use the <strong class="bold">aws</strong> bean and call the <strong class="bold">s3()</strong> method. This will return a helper for S3 Service. After that, you set the target bucket and then call the <strong class="bold">delete</strong> method.<p class="paragraph"/><h3>Deleting files stored on the root of some bucket (without path):</h3><p class="paragraph"/>To delete the "photo.jpg" file stored under "my-app-bucket-photos" bucket (http://my-app-bucket-photos.s3.amazonaws.com/photo.jpg)<p class="paragraph"/><div class="code"><pre>aws.s3().on(<span class="java&#45;quote">"my&#45;app&#45;bucket&#45;photos"</span>).delete(<span class="java&#45;quote">"photo.jpg"</span>)</pre></div><p class="paragraph"/><h3>Deleting files stored in some path of one bucket (one at a time):</h3><p class="paragraph"/>To delete the "avatar.jpg" file stored under "my-app-bucket-avatars" bucket and path "/users/lucastex/" (http://my-app-bucket-avatars.s3.amazonaws.com/users/lucastex/avatar.jpg)<p class="paragraph"/><div class="code"><pre>aws.s3().on(<span class="java&#45;quote">"my&#45;app&#45;bucket&#45;avatars"</span>).delete(<span class="java&#45;quote">"avatar.jpg"</span>, <span class="java&#45;quote">"/users/lucastex/"</span>)</pre></div><p class="paragraph"/><h3>Deleting all files inside one bucket</h3><p class="paragraph"/>To delete all files stored under "my-app-bucket-avatars" bucket (http://my-app-bucket-avatars.s3.amazonaws.com/*), use the deleteAll() method.<p class="paragraph"/><div class="code"><pre>aws.s3().on(<span class="java&#45;quote">"my&#45;app&#45;bucket&#45;avatars"</span>).deleteAll()</pre></div>



<h2 id="2.4 Accessing files">2.4 Accessing files</h2>
If you are uploading some document to S3, you'll probably need to store information on how to get that file again later.<p class="paragraph"/>The <strong class="bold">s3upload</strong> operation returns an instance of <strong class="bold">grails.plugin.aws.s3.S3File</strong>. As this plugin uses jets3t (<a href="http://jets3t.s3.amazonaws.com/index.html" target="blank">http://jets3t.s3.amazonaws.com/index.html</a>) to handle file upload, the S3File is just a wrapper for a <strong class="bold">delegated</strong> jets3t S3Object instance as you can see below:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> grails.plugin.aws.s3<p class="paragraph"/><span class="java&#45;keyword">import</span> org.jets3t.service.model.S3Object<p class="paragraph"/>class S3File &#123;<p class="paragraph"/>    @Delegate S3Object source<p class="paragraph"/>    S3File(S3Object _source) &#123;
        source = _source
    &#125;    
&#125;</pre></div><p class="paragraph"/>So, you can call any S3Object method on S3File instance. S3Object API is available here: <a href="http://jets3t.s3.amazonaws.com/api/org/jets3t/service/model/S3Object.html" target="blank">http://jets3t.s3.amazonaws.com/api/org/jets3t/service/model/S3Object.html</a>, for example, to retrieve the ETag hash for the S3File uploaded you would just call:<p class="paragraph"/><div class="code"><pre>def s3file = &#8230; //upload the file
def etag = s3file.getETag()</pre></div><p class="paragraph"/>The <strong class="bold">S3File</strong> object returned will give all information you'll need. Now, depends on what information you want to store. Follow S3Object docs (link above) and get whatever you want.


<h2 id="2.4.1 Accessing public files">2.4.1 Accessing public files</h2>
You can always generate the URL to access your files manually. Specially if you're using your own CNAME for it or if you're using cloudfront in front of S3.
But, if you still need some easy and tricky way to generate it, you can do the following:<p class="paragraph"/><div class="code"><pre>def url = aws.s3().on(<span class="java&#45;quote">"my&#45;first&#45;bucket"</span>).url(<span class="java&#45;quote">"photo.jpg"</span>)</pre></div><p class="paragraph"/>This will return an url like this: <strong class="bold">http://my-first-bucket.s3.amazonaws.com/photo.jpg</strong>. And if you're using paths for your file:<p class="paragraph"/><div class="code"><pre>def url = aws.s3().on(<span class="java&#45;quote">"my&#45;first&#45;bucket"</span>).url(<span class="java&#45;quote">"photo.jpg"</span>, <span class="java&#45;quote">"userphotos"</span>)</pre></div><p class="paragraph"/>That will gives you: <strong class="bold">http://my-first-bucket.s3.amazonaws.com/userphotos/photo.jpg</strong>


<h2 id="2.4.2 Accessing private files">2.4.2 Accessing private files</h2>
In some cases, you may need to access the private file directly (and not using the temporary public URL). For example, if you need to directly stream the file to the action's respose, you can do the following:<p class="paragraph"/><div class="code"><pre>def downloadFile = &#123;<p class="paragraph"/>    def bucket = params.bucket
    def path   = params.path
    def name   = params.name<p class="paragraph"/>    def fileToDownload = aws.s3().on(bucket).get(name, path)
    response.setContentType(<span class="java&#45;quote">"image/jpeg"</span>) //the file content type you're serving
    response.setHeader(<span class="java&#45;quote">"Content&#45;disposition"</span>, <span class="java&#45;quote">"inline; filename='$&#123;name&#125;'"</span>)
    response.outputStream &#60;&#60; fileToDownload.dataInputStream
&#125;</pre></div><p class="paragraph"/>This way, your application will download the file, and then serve to user's response outputstream.


<h2 id="2.4.3 Creating public URLs for private files">2.4.3 Creating public URLs for private files</h2>
When you upload a file to S3 with a "private" acl, means that the file won't be accessed directly using the URL, but only with your amazon credentials.<p class="paragraph"/>For example:<p class="paragraph"/><div class="code"><pre>def s3file = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"test.txt"</span>).s3upload &#123;
   bucket <span class="java&#45;quote">"secret&#45;files"</span>
   acl <span class="java&#45;quote">"<span class="java&#45;keyword">private</span>"</span>
&#125;</pre></div><p class="paragraph"/>This will make the file above (http://secret-files.s3.amazonaws.com/test.txt) inaccessible using its URL. If you need to allow someone to get the file in a short period of time, you can ask the plugin to generate a public URL for it. The object will remain private, but you can use the returned URL to access the file in a short period of time. For example:<p class="paragraph"/><div class="code"><pre>def s3file = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"test.txt"</span>).s3upload &#123;
   bucket <span class="java&#45;quote">"secret&#45;files"</span>
   acl <span class="java&#45;quote">"<span class="java&#45;keyword">private</span>"</span>
&#125;<p class="paragraph"/>def publicUrl = aws.s3().on(<span class="java&#45;quote">"secret&#45;files"</span>).publicUrlFor(1.hour, <span class="java&#45;quote">"test.txt"</span>)</pre></div><p class="paragraph"/>So, the value on the <strong class="bold">publicUrl</strong> is the URL for accessing the file. In this case, the URL will be valid for <strong class="bold">1 hour</strong>. Every requests on it will return the uploaded object. After one hour, next requests on it will return an error: "Access Denied for Object".<p class="paragraph"/><h3>Defining when public URL will expire</h3><p class="paragraph"/>You can set the expires date for the public URL, passing an argument to <strong class="bold">publicUrlFor</strong> method.<p class="paragraph"/><div class="code"><pre>(...).publicUrlFor(3.hours,  <span class="java&#45;quote">"test.txt"</span>) //will be available <span class="java&#45;keyword">for</span> 3 hours
(...).publicUrlFor(10.years, <span class="java&#45;quote">"test.txt"</span>) //available <span class="java&#45;keyword">for</span> 10 years
(...).publicUrlFor(1.second, <span class="java&#45;quote">"test.txt"</span>) //you won't get <span class="java&#45;keyword">this</span> one on time</pre></div><p class="paragraph"/>You can any of these variations:<p class="paragraph"/><div class="code"><pre>1.second or 2.seconds 
1.minute or 2.minutes
1.hour or 2.hours
1.day or 2.days
1.month or 2.months
1.year or 2.years</pre></div><p class="paragraph"/>This properties are injected on Integer class, so, enjoy the magic. 


<h2 id="2.4.4 Creating torrent for S3 hosted files">2.4.4 Creating torrent for S3 hosted files</h2>
It is possible to generate torrent URLs for S3 hosted files with the plugin.<p class="paragraph"/>After uploading some file, just call the <strong class="bold">torrent(...)</strong> method on the s3 helper this way.<p class="paragraph"/><div class="code"><pre>def s3file = <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"test.txt"</span>).s3upload &#123;
   bucket <span class="java&#45;quote">"secret&#45;files"</span>
   acl <span class="java&#45;quote">"<span class="java&#45;keyword">private</span>"</span>
&#125;<p class="paragraph"/>def torrentUrl = aws.s3().on(<span class="java&#45;quote">"secret&#45;files"</span>).torrent(<span class="java&#45;quote">"test.txt"</span>)</pre></div><p class="paragraph"/>From the AWS docs:<p class="paragraph"/> <em class="italic"><strong class="bold">There is no extra charge for use of BitTorrent with S3</strong>. Data transfer via the BitTorrent protocol is metered at the same rate as client/server delivery. To be precise, whenever a downloading BitTorrent client requests a “piece” of an object from the S3 “seeder”, charges accrue just as if an anonymous request for that piece had been made using the REST or SOAP protocol. These charges will appear on your S3 bill and usage reports in the same way. <strong class="bold">The difference is that if a lot of clients are requesting the same object simultaneously via BitTorrent, then the amount of data S3 must serve to satisfy those clients will be lower than with client/server delivery</strong>. This is because the BitTorrent clients are simultaneously uploading and downloading amongst themselves. The data transfer savings achieved from use of BitTorrent can vary widely depending on how popular your object is. Less popular objects require heavier use of the “seeder” to serve clients, and thus the difference between BitTorrent distribution costs and client/server distribution costs may be small for such objects. In particular, if only one client is ever downloading a particular object at a time, the cost of BitTorrent delivery will be the same as direct download.</em> 


<h2 id="2.4.5 Accessing only file metadata">2.4.5 Accessing only file metadata</h2>
If you just want to know some details about an object and you don't need its contents, it's faster to use the getDetails method. This returns only the object's details, also known as its 'HEAD'. Head information includes the object's size, date, and other metadata associated with it such as the Content Type.<p class="paragraph"/><div class="code"><pre>def downloadFileMetadata = &#123;<p class="paragraph"/>    def bucket = params.bucket
    def path   = params.path
    def name   = params.name<p class="paragraph"/>    def fileDetails = aws.s3().on(bucket).getDetails(name, path)<p class="paragraph"/>    render &#91;md5:fileDetails.getMd5HashAsBase64(),
            length:fileDetails.getContentLength(),
            type:fileDetails.getContentType()&#93; as JSON
&#125;</pre></div>


<h1 id="3 Amazon Simple Email Service (AWS SES)">3 Amazon Simple Email Service (AWS SES)</h1>
Amazon Simple E-mail Service (SES for now), it is a Sending E-mail Service provided by amazon, with a real low cost for users. The plugin interacts with it, so you can send e-mails using SES infrastructure without extra code in your app.<p class="paragraph"/>If you just want to send e-mails using your non-SES infrastructure, this plugin won't help you, I recommend you to use the great <strong class="bold">Grails Mail Plugin</strong> (<a href="http://grails.org/plugin/mail" target="blank">http://grails.org/plugin/mail</a>).<p class="paragraph"/>Unfortunately, SES does not provide a simple SMTP server address to connect and use, otherwise we could just configure the Grails Mail Plugin to use it. Instead of this, AWS provides a http web service for it.<p class="paragraph"/>But, if you really want to use Mail Plugin, you can configure AWS SES with a SMTP Bridge to connect to your SMTP server, but only if you're running Postfix or Sendmail locally. For doing this, check AWS SES Developer Guide.<p class="paragraph"/><strong class="bold">REMBEMBER:</strong> You have to be subscribed to SES, if you are not yet, do it before using the plugin.<p class="paragraph"/><blockquote class="warning">
Attention: If you only subscribed to Amazon SES and still didn't get access for production using, you'll only be allowed to send e-mails 'from' AND 'to' emails that has been verified with amazon. So, you'll have to use the 'grails aws-ses-verify-email' for both sender and recipient adresses. After getting production access, this won't be needed.                
</blockquote>



<h2 id="3.1 Configuring the SES options">3.1 Configuring the SES options</h2>
The plugin provides these configurations for SES service.<p class="paragraph"/><h3>enabled</h3><p class="paragraph"/>The plugin is enabled by default on all environments, you can set 'enabled=false' on some environments to disable email sending. This is useful on testing environments where integration tests runs.<p class="paragraph"/><h3>catchall</h3><p class="paragraph"/>If you set the 'catch all' address, it will override any other address you set in 'to', 'cc' and 'bcc' properties. 
This is useful when you have acceptance tests or other environments/uses that you want your mails to be sent, but not to the usual addresses, but to one and only one address.<p class="paragraph"/>Any attempt to send emails with this property configured, will send e-mails to the address configured, with no 'cc' and 'bcc' addresses.<p class="paragraph"/><h3>from</h3><p class="paragraph"/>The default 'from' address to be used. You can override this parameter in every call to the plugin, setting the 'from' parameter. As said before, this address have to be verified with AWS (check Gant scripts section to see how to do it).<p class="paragraph"/><h3>Configuration example</h3><p class="paragraph"/>To configure it, you'll do the following inside the <strong class="bold">grails.plugin.aws</strong> section of your application Config.<p class="paragraph"/><div class="code"><pre>grails &#123;
   plugin &#123;
      aws &#123;<p class="paragraph"/>         ses &#123;
            enabled = <span class="java&#45;keyword">false</span>
            catchall = <span class="java&#45;quote">"allmailforme@gmail.com"</span>
            from = <span class="java&#45;quote">"my&#45;verified&#45;email@gmail.com"</span>
         &#125;<p class="paragraph"/>      &#125;
   &#125;
&#125;</pre></div><p class="paragraph"/>


<h2 id="3.2 Sending text emails">3.2 Sending text emails</h2>
To send e-mails, just call the <strong class="bold">sesMail</strong> closure in your controllers or services<p class="paragraph"/><div class="code"><pre>def mailId = sesMail &#123;
    from <span class="java&#45;quote">"origin@gmail.com"</span>
    to <span class="java&#45;quote">"test&#45;email@gmail.com"</span>
    subject <span class="java&#45;quote">"test plain text mail"</span>
    body <span class="java&#45;quote">"<span class="java&#45;keyword">this</span> is the e&#45;mail content, sent at: ($&#123;<span class="java&#45;keyword">new</span> Date().format('dd/MM/yyyy HH:mm')&#125;)"</span>
&#125;</pre></div><p class="paragraph"/>The <strong class="bold">sesMail</strong> returns an unique identifier for this e-mail at Amazon infrastructure, as this one:<p class="paragraph"/><div class="code"><pre>0000012dcde0ea1c&#45;d331d2ec&#45;3972&#45;4a6c&#45;825f&#45;fc980cde3352&#45;000000</pre></div><p class="paragraph"/>Amazon don't provide anything useful to do with this <strong class="bold">id</strong> yet, but I imagine that in a near future, you'll be able to retrieve if this email was delivered correctly, or if it was spammed or bounced. So, feel free to store it if you want to.<p class="paragraph"/><h3>Closure parameters</h3><p class="paragraph"/><h4>AWS Credentials</h4><p class="paragraph"/>As the S3 file upload support, you can override AWS credentials settings for sending mails. This is rare and unusual, but if you really need, do the same as in S3.<p class="paragraph"/><div class="code"><pre>credentials <span class="java&#45;quote">"<span class="java&#45;keyword">new</span>&#45;access&#45;key"</span>, <span class="java&#45;quote">"<span class="java&#45;keyword">new</span>&#45;secret&#45;key"</span></pre></div><p class="paragraph"/>Just remember, if this new AWS credentials belong to another AWS account, this account will have to be subscribed to SES service and have verified e-mails to send.<p class="paragraph"/><h4>Defining the sender</h4><p class="paragraph"/>As seen in the other topic, you can set this default address in the application Config, but if you want to explicitly set the address in each email you send, just override the <strong class="bold">from</strong> method:<p class="paragraph"/><div class="code"><pre>from <span class="java&#45;quote">"my&#45;other&#45;email@gmail.com"</span></pre></div><p class="paragraph"/><h4>Defining recipient e-mails</h4><p class="paragraph"/><h5>To</h5><p class="paragraph"/>To set the recipient e-mail, use the <strong class="bold">to</strong> method.<p class="paragraph"/><div class="code"><pre>to <span class="java&#45;quote">"user@myapp.com"</span></pre></div><p class="paragraph"/>You can send to multiple addresses doing this:<p class="paragraph"/><div class="code"><pre>to <span class="java&#45;quote">"user<code>myapp.com"</span>, <span class="java&#45;quote">"user2</code>myapp.com"</span>, <span class="java&#45;quote">"user3@myapp.com"</span></pre></div><p class="paragraph"/><h5>CC and BCC</h5><p class="paragraph"/>To set CC and BCC addresses, you can do the same as <strong class="bold">to</strong> addresses:<p class="paragraph"/><div class="code"><pre>cc <span class="java&#45;quote">"copied@myapp.com"</span></pre></div><p class="paragraph"/><div class="code"><pre>bcc <span class="java&#45;quote">"you&#45;dont&#45;know&#45;me&#64;myapp.com"</span></pre></div><p class="paragraph"/>And again, for multiple addresses:<p class="paragraph"/><div class="code"><pre>ccc <span class="java&#45;quote">"user1&#64;myapp.com"</span>, <span class="java&#45;quote">"user2&#64;myapp.com"</span>, <span class="java&#45;quote">"user3&#64;myapp.com"</span></pre></div><p class="paragraph"/><div class="code"><pre>bcc <span class="java&#45;quote">"user4&#64;myapp.com"</span>, <span class="java&#45;quote">"user5&#64;myapp.com"</span>, <span class="java&#45;quote">"user6&#64;myapp.com"</span></pre></div><p class="paragraph"/><h4>Setting the e-mail subject</h4><p class="paragraph"/>To set the subject, following other parameters convention:<p class="paragraph"/><div class="code"><pre>subject <span class="java&#45;quote">"Testing the AWS Plugin"</span></pre></div><p class="paragraph"/><h4>E-mail body</h4><p class="paragraph"/>And finally, the e-mail body can be set with:<p class="paragraph"/><div class="code"><pre>body <span class="java&#45;quote">"This is the text user will receive in the e&#45;mail body"</span></pre></div><p class="paragraph"/><h4>Defining the reply-to address</h4><p class="paragraph"/>You can set the reply-to header of your mail message using the <strong class="bold">replyTo</strong> closure parameter. And you can pass one string, or a list of e-mails that will be set as 'reply-to' header.<p class="paragraph"/><strong class="bold">One e-mail</strong><p class="paragraph"/><div class="code"><pre>replyTo <span class="java&#45;quote">"my&#45;other&#45;email@gmail.com"</span></pre></div><p class="paragraph"/><strong class="bold">Multiple e-mails</strong>
<div class="code"><pre>replyTo <span class="java&#45;quote">"my&#45;other&#45;email&#45;1<code>gmail.com"</span>, <span class="java&#45;quote">"my&#45;other&#45;email&#45;2</code>gmail.com"</span>, <span class="java&#45;quote">"my&#45;other&#45;email&#45;3@gmail.com"</span></pre></div><p class="paragraph"/><h4>Setting the e-mail charset</h4><p class="paragraph"/>You can modify the email charset using the <strong class="bold">charset</strong> closure parameter.  If this isn't specified, the default is UTF-8.<p class="paragraph"/><div class="code"><pre>charset <span class="java&#45;quote">"charset "</span>ISO&#45;8859&#45;1"</pre></div>



<h2 id="3.3 Sending HTML emails">3.3 Sending HTML emails</h2>
You can send html emails the same way you'd do with text e-mails, just instead of calling the <strong class="bold">body</strong> method, you have to pass the content to the <strong class="bold">html</strong> method:<p class="paragraph"/><div class="code"><pre>sesMail &#123;
   to <span class="java&#45;quote">"email@gmailcom"</span>
   subject <span class="java&#45;quote">"testing html emails"</span>
   html <span class="java&#45;quote">"&#60;html&#62;&#60;body&#62;&#60;h3&#62;HTML email&#60;/h3&#62;&#60;strong&#62;Strong text&#60;/strong&#62;&#60;/body&#62;&#60;/html&#62;"</span>
&#125;</pre></div><p class="paragraph"/><h3>Using GSP templates to generate html emails</h3><p class="paragraph"/>I bet you don't want to write all the HTML in your closure, so, you can design your e-mail in a grails template and use it to define the email content:<p class="paragraph"/><div class="code"><pre>sesMail &#123;
   to <span class="java&#45;quote">"email@gmailcom"</span>
   subject <span class="java&#45;quote">"testing html emails"</span>
   html g.render(template: <span class="java&#45;quote">"/email&#45;templates/template"</span>, model: &#91;name: <span class="java&#45;quote">"Lucas"</span>, now: <span class="java&#45;keyword">new</span> Date()&#93;)
&#125;</pre></div><p class="paragraph"/>This will render the <strong class="bold">/email-templates/_template.gsp</strong> passing the model map to the rendering engine. For example, let's imagine this file has the following content:<p class="paragraph"/><div class="code"><pre>&#60;html&#62;
   &#60;body&#62;
      &#60;h2&#62;Testing e&#45;mail templates&#60;/h2&#62;
      &#60;ul&#62;
         &#60;li&#62;Name: $&#123;name&#125;&#60;/li&#62;
         &#60;li&#62;Now: $&#123;now.format('dd/MM/yyyy HH:mm')&#125;&#60;/li&#62;
      &#60;/ul&#62;
   &#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/>This will send the html e-mail with the content below rendered:<p class="paragraph"/><div class="code"><pre>&#60;html&#62;
   &#60;body&#62;
      &#60;h2&#62;Testing e&#45;mail templates&#60;/h2&#62;
      &#60;ul&#62;
         &#60;li&#62;Name: Lucas&#60;/li&#62;
         &#60;li&#62;Now: 28/01/2010 18:02&#60;/li&#62;
      &#60;/ul&#62;
   &#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/><blockquote class="warning">
You can use both methods <strong class="bold">html</strong> and <strong class="bold">body</strong> to send e-mails with both content in it. This is usually the best approach, since user may not allowed his email client to render html emails. So, it is up to you.
</blockquote>


<h2 id="3.4 Sending emails with attachments">3.4 Sending emails with attachments</h2>
You can attach one or more files in your e-mail if you want. Keep in mind that AWS SES charges for the amount of data you sent attached in your e-mails.<p class="paragraph"/>It is simple, you just need to call the "attach" method in the sesMail closure with the full path to desired files, like below:<p class="paragraph"/><div class="code"><pre>sesMail &#123;
   to <span class="java&#45;quote">"email@gmailcom"</span>
   subject <span class="java&#45;quote">"testing emails with one attachment"</span>
   body <span class="java&#45;quote">"..."</span>
   attach <span class="java&#45;quote">"/users/website/images/file1.jpg"</span>
&#125;</pre></div><p class="paragraph"/>You can attach several files separating file paths with commas:<p class="paragraph"/><div class="code"><pre>sesMail &#123;
   to <span class="java&#45;quote">"email@gmailcom"</span>
   subject <span class="java&#45;quote">"testing emails with one attachment"</span>
   body <span class="java&#45;quote">"..."</span>
   attach <span class="java&#45;quote">"/users/website/images/file1.jpg"</span>, <span class="java&#45;quote">"/users/website/images/file2.jpg"</span>, <span class="java&#45;quote">"/users/website/images/file3.jpg"</span>
&#125;</pre></div>

                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">S3</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/S3/aws-s3-list-buckets.html">aws-s3-list-buckets</a>
                        </div>
                        
                        </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">SES</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/SES/aws-ses-get-send-quota.html">aws-ses-get-send-quota</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/SES/aws-ses-get-send-statistics.html">aws-ses-get-send-statistics</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/SES/aws-ses-list-verified-emails.html">aws-ses-list-verified-emails</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/SES/aws-ses-send-ping-mail.html">aws-ses-send-ping-mail</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/SES/aws-ses-verify-email.html">aws-ses-verify-email</a>
                        </div>
                        
                        </div>
                    </div>
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>

<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>3.2.3 Sending HTML emails</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    You can send html emails the same way you'd do with text e-mails, just instead of calling the <strong class="bold">body</strong> method, you have to pass the content to the <strong class="bold">html</strong> method:<p class="paragraph"/><div class="code"><pre>sesMail &#123;
   to <span class="java&#45;quote">"email@gmailcom"</span>
   subject <span class="java&#45;quote">"testing html emails"</span>
   html <span class="java&#45;quote">"&#60;html&#62;&#60;body&#62;&#60;h3&#62;HTML email&#60;/h3&#62;&#60;strong&#62;Strong text&#60;/strong&#62;&#60;/body&#62;&#60;/html&#62;"</span>
&#125;</pre></div><p class="paragraph"/><h3>Using GSP templates to generate html emails</h3><p class="paragraph"/>I bet you don't want to write all the HTML in your closure, so, you can design your e-mail in a grails template and use it to define the email content:<p class="paragraph"/><div class="code"><pre>sesMail &#123;
   to <span class="java&#45;quote">"email@gmailcom"</span>
   subject <span class="java&#45;quote">"testing html emails"</span>
   html g.render(template: <span class="java&#45;quote">"/email&#45;templates/template"</span>, model: &#91;name: <span class="java&#45;quote">"Lucas"</span>, now: <span class="java&#45;keyword">new</span> Date()&#93;)
&#125;</pre></div><p class="paragraph"/>This will render the <strong class="bold">/email-templates/_template.gsp</strong> passing the model map to the rendering engine. For example, let's imagine this file has the following content:<p class="paragraph"/><div class="code"><pre>&#60;html&#62;
   &#60;body&#62;
      &#60;h2&#62;Testing e&#45;mail templates&#60;/h2&#62;
      &#60;ul&#62;
         &#60;li&#62;Name: $&#123;name&#125;&#60;/li&#62;
         &#60;li&#62;Now: $&#123;now.format('dd/MM/yyyy HH:mm')&#125;&#60;/li&#62;
      &#60;/ul&#62;
   &#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/>This will send the html e-mail with the content below rendered:<p class="paragraph"/><div class="code"><pre>&#60;html&#62;
   &#60;body&#62;
      &#60;h2&#62;Testing e&#45;mail templates&#60;/h2&#62;
      &#60;ul&#62;
         &#60;li&#62;Name: Lucas&#60;/li&#62;
         &#60;li&#62;Now: 28/01/2010 18:02&#60;/li&#62;
      &#60;/ul&#62;
   &#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/><blockquote class="warning">
You can use both methods <strong class="bold">html</strong> and <strong class="bold">body</strong> to send e-mails with both content in it. This is usually the best approach, since user may not allowed his email client to render html emails. So, it is up to you.
</blockquote>
    </body>
</html>
